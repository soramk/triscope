<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手相の科学と神秘 - Palmistry Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <!-- 共通CSS -->
    <link rel="stylesheet" href="../../assets/common.css">
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Chosen Palette: Mystic Parchment -->
    <!-- Background: Warm Neutral (Stone-50/100), Text: Dark Ink (Stone-800), Accent: Deep Indigo (Indigo-900) & Gold (Amber-600) -->

    <!-- Application Structure Plan: 
         1. Hero Section: Introduction to Palmistry (Sōjutsu) and its unique position.
         2. Interactive Hand Map (The Core): A Canvas-based interactive diagram where users can explore lines and mounts. This replaces static images and encourages active learning of the anatomy.
         3. Comparative Analysis (Chart.js): A Radar chart comparing Palmistry to other fortune-telling methods (Astrology, Tarot) to visualize its strengths (Character, Long-term trends) vs weaknesses.
         4. History Timeline: An interactive vertical flow showing the journey from Ancient India to Modern Japan.
         5. Methodology Section: A step-by-step interactive guide on "Left vs Right" hand logic and basic reading steps.
         6. Synthesis/Conclusion: Summary of the "Hand = Visible Brain" theory.
    -->

    <!-- Visualization & Content Choices:
         1. Hand Map: HTML5 Canvas. GOAL: Teach anatomy. METHOD: Custom drawing functions (bezier curves) to create a stylized hand. Interaction: Hover/Click detection on lines/mounts updates a detail panel. JUSTIFICATION: Avoids SVGs/Images, allows dynamic highlighting.
         2. Strengths Radar: Chart.js Radar. GOAL: Compare domains. METHOD: Scores on 'Personality', 'Timing', 'Specific Outcome', 'Fate'. JUSTIFICATION: Clearly shows Palmistry's analytical nature vs chance-based arts.
         3. Timeline: HTML/Tailwind. GOAL: Show evolution. METHOD: Flexbox layout with hover effects.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        /* bodyスタイルは common.css で定義 */
        /* h1-h3, .serifスタイルは common.css で定義 */

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        canvas#handCanvas {
            cursor: pointer;
            border-radius: 12px;
            background-color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .info-card {
            transition: all 0.3s ease;
        }

        .nav-btn.active {
            background-color: #312e81;
            /* Indigo 900 */
            color: white;
        }
    </style>
</head>

<body class="antialiased min-h-screen flex flex-col">


    <!-- Top Navigation Menu -->
    <nav class="fixed top-0 left-0 w-full z-50 glass-panel border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center cursor-pointer" onclick="window.location.href='../../index.html'">
                <div class="w-8 h-8 bg-amber-600/10 rounded-lg flex items-center justify-center mr-3">
                    <i data-lucide="hand" class="w-5 h-5 text-amber-600"></i>
                </div>
                <span class="text-2xl font-bold text-stone-800 serif tracking-tight">手相</span>
                <span class="ml-2 text-xs text-stone-500 uppercase tracking-widest hidden sm:block">Palmistry</span>
            </div>

            <!-- Desktop Nav -->
            <div class="hidden md:flex items-center gap-1">
                <button onclick="scrollToSection('hero')"
                    class="px-4 py-2 rounded-full text-sm font-medium text-stone-600 hover:bg-amber-50 hover:text-amber-700 transition-all flex items-center gap-2">
                    <i data-lucide="info" class="w-4 h-4"></i> 概要
                </button>
                <button onclick="scrollToSection('interactive-map')"
                    class="px-4 py-2 rounded-full text-sm font-medium text-stone-600 hover:bg-amber-50 hover:text-amber-700 transition-all flex items-center gap-2">
                    <i data-lucide="map" class="w-4 h-4"></i> 手相地図
                </button>
                <button onclick="scrollToSection('special-signs')"
                    class="px-4 py-2 rounded-full text-sm font-medium text-stone-600 hover:bg-amber-50 hover:text-amber-700 transition-all flex items-center gap-2">
                    <i data-lucide="stars" class="w-4 h-4"></i> 特殊紋
                </button>
                <button onclick="scrollToSection('history')"
                    class="px-4 py-2 rounded-full text-sm font-medium text-stone-600 hover:bg-amber-50 hover:text-amber-700 transition-all flex items-center gap-2">
                    <i data-lucide="history" class="w-4 h-4"></i> 歴史
                </button>
                <button onclick="scrollToSection('method')"
                    class="px-4 py-2 rounded-full text-sm font-medium text-stone-600 hover:bg-amber-50 hover:text-amber-700 transition-all flex items-center gap-2">
                    <i data-lucide="book-open" class="w-4 h-4"></i> 鑑定法
                </button>
            </div>

            <!-- Mobile Menu Btn -->
            <button id="mobile-menu-btn" class="md:hidden p-2 text-stone-900 hover:bg-gray-100 rounded-lg">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu"
            class="hidden md:hidden bg-white/95 backdrop-blur-md border-t border-gray-100 animate-fade-in">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="scrollToSection('hero'); toggleMobileMenu()"
                    class="flex items-center gap-3 w-full text-left px-4 py-3 text-stone-700 hover:bg-amber-50 rounded-lg font-medium transition-colors">
                    <i data-lucide="info" class="w-5 h-5"></i> 概要・本質
                </button>
                <button onclick="scrollToSection('interactive-map'); toggleMobileMenu()"
                    class="flex items-center gap-3 w-full text-left px-4 py-3 text-stone-700 hover:bg-amber-50 rounded-lg font-medium transition-colors">
                    <i data-lucide="map" class="w-5 h-5"></i> 手相地図
                </button>
                <button onclick="scrollToSection('special-signs'); toggleMobileMenu()"
                    class="flex items-center gap-3 w-full text-left px-4 py-3 text-stone-700 hover:bg-amber-50 rounded-lg font-medium transition-colors">
                    <i data-lucide="stars" class="w-5 h-5"></i> 特殊紋・ラッキーサイン
                </button>
                <button onclick="scrollToSection('hand-shapes'); toggleMobileMenu()"
                    class="flex items-center gap-3 w-full text-left px-4 py-3 text-stone-700 hover:bg-amber-50 rounded-lg font-medium transition-colors">
                    <i data-lucide="layout" class="w-5 h-5"></i> 手の形
                </button>
                <button onclick="scrollToSection('history'); toggleMobileMenu()"
                    class="flex items-center gap-3 w-full text-left px-4 py-3 text-stone-700 hover:bg-amber-50 rounded-lg font-medium transition-colors">
                    <i data-lucide="history" class="w-5 h-5"></i> 歴史とロジック
                </button>
                <button onclick="scrollToSection('method'); toggleMobileMenu()"
                    class="flex items-center gap-3 w-full text-left px-4 py-3 text-amber-900 bg-amber-50 hover:bg-amber-100 rounded-lg font-bold transition-colors">
                    <i data-lucide="book-open" class="w-5 h-5"></i> 鑑定の進め方
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="relative pt-32 pb-20 px-4 overflow-hidden bg-[#F9F6F0]">
        <!-- Decorative subtle hand outline -->
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl opacity-[0.03] pointer-events-none">
            <i data-lucide="hand" class="w-full h-full text-stone-900"></i>
        </div>

        <div class="max-w-7xl mx-auto relative z-10">
            <div class="text-center space-y-8">
                <div
                    class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-amber-100/50 border border-amber-200 text-amber-800 text-xs font-bold tracking-widest uppercase animate-fade-in shadow-sm">
                    <i data-lucide="sparkles" class="w-3.5 h-3.5"></i> 手のひらに刻まれた「脳の設計図」
                </div>

                <h1 class="text-5xl md:text-7xl font-bold text-stone-900 serif leading-tight animate-fade-in-up"
                    style="animation-delay: 0.1s">
                    運命は、<span class="text-amber-700 italic">その手</span>が<br>
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-amber-600 to-indigo-900">すでに知っている。</span>
                </h1>

                <p class="max-w-2xl mx-auto text-lg md:text-xl text-stone-600 leading-relaxed animate-fade-in-up"
                    style="animation-delay: 0.2s">
                    手相は単なる占いではありません。それは数千年の統計と脳科学の境界に位置する「相術」であり、あなたの意識や行動が刻んだ唯一無二の履歴書です。
                </p>

                <div class="flex flex-wrap justify-center gap-4 pt-4 animate-fade-in-up" style="animation-delay: 0.3s">
                    <button onclick="scrollToSection('interactive-map')"
                        class="bg-indigo-900 text-white px-8 py-4 rounded-full font-bold shadow-xl shadow-indigo-900/20 hover:scale-105 transition-all flex items-center gap-2 group">
                        <i data-lucide="map" class="w-5 h-5 group-hover:rotate-12 transition-transform"></i> マップを探索する
                    </button>
                    <button onclick="scrollToSection('analysis')"
                        class="bg-white text-stone-800 border-2 border-stone-200 px-8 py-4 rounded-full font-bold hover:bg-stone-50 transition-all">
                        特性と得意分野
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-12 space-y-24">

        <!-- Section 2: Interactive Hand Map (The Core) -->
        <section id="interactive-map" class="bg-stone-100 rounded-3xl p-6 md:p-10 shadow-inner">
            <div class="text-center mb-8">
                <div
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-100 text-indigo-700 text-xs font-bold mb-4 uppercase tracking-widest">
                    Dual Hand Exploration
                </div>
                <h3 class="text-3xl font-bold text-indigo-900 serif mb-4">インタラクティブ両手マップ</h3>
                <p class="text-stone-600 max-w-2xl mx-auto">
                    手相は片手だけでは完結しません。<span class="text-amber-700 font-bold">左手（先天的な資質）</span>と<span
                        class="text-amber-700 font-bold">右手（現在と未来）</span>の違いを読み解くことが、真の手相鑑定の第一歩です。
                </p>
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-12 gap-8 items-start">
                <!-- Left Column: Both Hands -->
                <div class="xl:col-span-8 space-y-8">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 items-center justify-items-center">
                        <!-- Left Hand (Innate) - On the left side of screen -->
                        <div class="relative group">
                            <div
                                class="absolute -inset-4 bg-indigo-500/5 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-duration-700">
                            </div>
                            <h4 class="text-sm font-bold text-stone-500 mb-2">左手 <span
                                    class="text-[10px] font-normal opacity-70">先天運・内面</span></h4>
                            <div
                                class="relative border-2 border-stone-100 rounded-[3rem] p-4 bg-white/50 backdrop-blur-sm shadow-inner group-hover:border-indigo-200 transition-colors">
                                <canvas id="leftHandCanvas" width="280" height="340"
                                    class="relative z-10 drop-shadow-sm"></canvas>
                                <div id="left-tooltip"
                                    class="absolute pointer-events-none bg-stone-900/90 text-white px-2 py-1 rounded text-[10px] opacity-0 transition-opacity z-20 whitespace-nowrap font-bold tracking-wider">
                                </div>
                            </div>
                            <div class="mt-4 text-center">
                                <span class="text-[10px] text-stone-400 uppercase tracking-widest font-bold">Innate &
                                    Past</span>
                            </div>
                        </div>

                        <!-- Right Hand (Acquired) - On the right side of screen -->
                        <div class="relative group">
                            <div
                                class="absolute -inset-4 bg-orange-500/5 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-duration-700">
                            </div>
                            <h4 class="text-sm font-bold text-stone-500 mb-2">右手 <span
                                    class="text-[10px] font-normal opacity-70">後天運・外面</span></h4>
                            <div
                                class="relative border-2 border-stone-100 rounded-[3rem] p-4 bg-white/50 backdrop-blur-sm shadow-inner group-hover:border-orange-200 transition-colors">
                                <canvas id="rightHandCanvas" width="280" height="340"
                                    class="relative z-10 drop-shadow-sm"></canvas>
                                <div id="right-tooltip"
                                    class="absolute pointer-events-none bg-stone-900/90 text-white px-2 py-1 rounded text-[10px] opacity-0 transition-opacity z-20 whitespace-nowrap font-bold tracking-wider">
                                </div>
                            </div>
                            <div class="mt-4 text-center">
                                <span class="text-[10px] text-stone-400 uppercase tracking-widest font-bold">Current &
                                    Future</span>
                            </div>
                        </div>
                    </div>
                    <!-- Common Controls -->
                    <div class="flex flex-wrap justify-center gap-2">
                        <div class="w-full text-center mb-1"><span
                                class="text-[9px] text-stone-400 uppercase tracking-widest font-bold">Main Lines</span>
                        </div>
                        <button onclick="simulateHover('life')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-red-50 hover:border-red-200 transition-all">生命線</button>
                        <button onclick="simulateHover('head')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-blue-50 hover:border-blue-200 transition-all">知能線</button>
                        <button onclick="simulateHover('heart')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-pink-50 hover:border-pink-200 transition-all">感情線</button>
                        <button onclick="simulateHover('fate')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-purple-50 hover:border-purple-200 transition-all">運命線</button>

                        <div class="w-full text-center mb-1 mt-2"><span
                                class="text-[9px] text-stone-400 uppercase tracking-widest font-bold">Mounts (Energy
                                Points)</span></div>
                        <button onclick="simulateHover('jupiter')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-amber-50 hover:border-amber-200 transition-all">木星丘</button>
                        <button onclick="simulateHover('saturn')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-stone-100 hover:border-stone-300 transition-all">土星丘</button>
                        <button onclick="simulateHover('sun')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-yellow-50 hover:border-yellow-200 transition-all">太陽丘</button>
                        <button onclick="simulateHover('mercury')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-emerald-50 hover:border-emerald-200 transition-all">水星丘</button>
                        <button onclick="simulateHover('venus')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-red-50 hover:border-red-200 transition-all">金星丘</button>
                        <button onclick="simulateHover('moon')"
                            class="px-3 py-1.5 text-[10px] font-bold bg-white border border-stone-200 rounded-full shadow-sm hover:bg-indigo-50 hover:border-indigo-200 transition-all">月丘</button>
                    </div>
                </div>

                <!-- Right Column: Info Panel -->
                <div class="xl:col-span-4 sticky top-24">
                    <div id="info-panel"
                        class="bg-white p-8 rounded-2xl shadow-xl border-l-8 border-indigo-900 h-full min-h-[400px] transition-all duration-500">
                        <div class="flex items-center justify-between mb-6">
                            <h4 id="info-title" class="text-3xl font-bold text-stone-800 serif">手相の地図</h4>
                            <span id="info-category"
                                class="px-3 py-1 bg-stone-100 text-stone-400 rounded text-[10px] font-bold tracking-widest uppercase">Select
                                Part</span>
                        </div>

                        <div id="info-placeholder" class="text-stone-400 space-y-4">
                            <div class="flex items-center gap-3">
                                <i data-lucide="mouse-pointer-2" class="w-5 h-5"></i>
                                <p class="text-sm">いずれかの線や丘に触れてください。</p>
                            </div>
                            <div class="bg-indigo-50/50 p-4 rounded-xl border border-indigo-100/50">
                                <p class="text-xs text-indigo-700 leading-relaxed italic">
                                    「左手は先天的な資質、右手は後天的な変化」という解釈が一般的です。両手を組み合わせて総合的に判断します。
                                </p>
                            </div>
                        </div>

                        <!-- Dynamic Content Area -->
                        <div id="info-details" class="hidden animate-fade-in space-y-6">
                            <div
                                class="bg-gradient-to-br from-indigo-50 to-white p-5 rounded-xl border border-indigo-100">
                                <h5 class="font-bold text-indigo-900 mb-2 flex items-center gap-2">
                                    <i data-lucide="scroll" class="w-4 h-4"></i> 主な意味と役割
                                </h5>
                                <p id="info-meaning" class="text-sm text-stone-600 leading-relaxed"></p>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <h5 class="font-bold text-stone-700 mb-1 text-sm">部位の説明</h5>
                                    <p id="info-desc" class="text-xs text-stone-500 italic"></p>
                                </div>
                                <div id="line-points-section">
                                    <h5 class="font-bold text-stone-700 mb-2 text-sm">鑑定のチェックポイント</h5>
                                    <ul id="info-check" class="space-y-2">
                                        <!-- Dynamic points -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="self-check-gallery" class="space-y-12 py-12">
            <div class="text-center max-w-3xl mx-auto">
                <div
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-bold mb-4 uppercase tracking-widest">
                    Quick Diagnostics
                </div>
                <h3 class="text-3xl md:text-4xl font-bold text-stone-900 serif mb-8">線で紐解く、あなたの本質と言動</h3>

                <!-- Dedicated Result Box (Moved above the intro text) -->
                <div id="self-diagnose-result"
                    class="mb-10 min-h-[160px] bg-white border-2 border-amber-100 p-6 md:p-8 rounded-[2.5rem] shadow-sm flex flex-col md:flex-row items-center gap-8 transition-all duration-500 overflow-hidden relative">
                    <div class="absolute top-0 right-0 p-4 opacity-5">
                        <i data-lucide="sparkles" class="w-24 h-24 text-amber-600"></i>
                    </div>

                    <div id="diagnose-icon-container"
                        class="w-16 h-16 md:w-20 md:h-20 bg-amber-50 rounded-2xl flex items-center justify-center flex-shrink-0 border border-amber-100 shadow-inner">
                        <i data-lucide="fingerprint" class="w-8 h-8 md:w-10 md:h-10 text-amber-500"></i>
                    </div>

                    <div class="space-y-3 text-center md:text-left relative z-10">
                        <h4 id="diagnose-title" class="text-xl md:text-2xl font-bold serif text-stone-800">
                            気になる線を選択してください
                        </h4>
                        <p id="diagnose-text" class="text-stone-500 leading-relaxed text-sm md:text-base">
                            下の12パターンから、自分の手に最も近いものを選ぶと、ここに詳しい診断結果が表示されます。
                        </p>
                    </div>
                </div>

                <p class="text-stone-500 text-sm leading-relaxed">
                    左右で違う場合は、<span class="text-indigo-600 font-bold">右手を「今の自分」</span>、<span
                        class="text-amber-600 font-bold">左手を「眠っている自分」</span>として読み解きます。
                </p>
            </div>


            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
                <!-- Group 1: Intelligence (Head Line) -->
                <div class="bg-white p-6 rounded-3xl shadow-lg border border-stone-100 hover:shadow-xl transition-all">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center">
                            <i data-lucide="brain" class="w-8 h-8 text-blue-600"></i>
                        </div>
                        <h4 class="text-lg font-bold text-stone-800">1. 知能線</h4>
                    </div>

                    <div class="space-y-3">
                        <button onclick="diagnose('head', 'straight')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M20,60 Q50,60 85,60" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">直線・横向き</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('head', 'curved')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M20,60 Q50,65 70,85" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">ゆるやかな下降</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('head', 'short')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M20,60 L50,60" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">極端に短い</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('head', 'long')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M20,60 Q50,60 95,65" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">深く長い知能線</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('head', 'forked')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M20,60 Q50,60 70,60" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M70,60 Q80,55 90,50" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M70,60 Q80,65 90,70" fill="none" stroke="#3b82f6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">先端が二股</div>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>


                <!-- Group 2: Heart (Heart Line) -->
                <div class="bg-white p-6 rounded-3xl shadow-lg border border-stone-100 hover:shadow-xl transition-all">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-12 h-12 bg-pink-50 rounded-full flex items-center justify-center">
                            <i data-lucide="heart" class="w-8 h-8 text-pink-500"></i>
                        </div>
                        <h4 class="text-lg font-bold text-stone-800">2. 感情線</h4>
                    </div>

                    <div class="space-y-3">
                        <button onclick="diagnose('heart', 'upward')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-pink-300 group-hover:bg-pink-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M85,45 Q50,45 20,20" fill="none" stroke="#ec4899" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">先端が急上昇</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('heart', 'between')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-pink-300 group-hover:bg-pink-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M85,45 Q50,45 35,25" fill="none" stroke="#ec4899" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">指の間に入る</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('heart', 'branch')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-pink-300 group-hover:bg-pink-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M85,45 Q60,45 45,45" fill="none" stroke="#ec4899" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M45,45 Q35,40 25,30" fill="none" stroke="#ec4899" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M45,45 Q35,50 30,55" fill="none" stroke="#ec4899" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">先端が枝分かれ</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('heart', 'horizontal')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-pink-300 group-hover:bg-pink-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M85,45 L20,45" fill="none" stroke="#ec4899" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">まっすぐ横向き</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('heart', 'chained')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-pink-300 group-hover:bg-pink-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M85,45 Q75,40 65,45 T45,45 T25,45" fill="none" stroke="#ec4899"
                                            stroke-width="4" stroke-dasharray="2,4" stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">全体が鎖状</div>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>


                <!-- Group 3: Life (Life Line) -->
                <div class="bg-white p-6 rounded-3xl shadow-lg border border-stone-100 hover:shadow-xl transition-all">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center">
                            <i data-lucide="zap" class="w-8 h-8 text-red-500"></i>
                        </div>
                        <h4 class="text-lg font-bold text-stone-800">3. 生命線</h4>
                    </div>

                    <div class="space-y-3">
                        <button onclick="diagnose('life', 'wide')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-red-300 group-hover:bg-red-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M25,20 Q65,40 30,90" fill="none" stroke="#ef4444" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">張り出しが広い</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('life', 'narrow')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-red-300 group-hover:bg-red-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M25,20 Q40,40 25,90" fill="none" stroke="#ef4444" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">張り出しが狭い</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('life', 'chain')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-red-300 group-hover:bg-red-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M25,20 Q65,40 30,90" fill="none" stroke="#ef4444"
                                            stroke-dasharray="2,6" stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">全体が鎖状</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('life', 'broken')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-red-300 group-hover:bg-red-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M25,20 Q50,35 45,50" fill="none" stroke="#ef4444" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M55,60 Q45,75 30,90" fill="none" stroke="#ef4444" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">途中で途切れる</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('life', 'rising')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-red-300 group-hover:bg-red-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M25,20 Q65,40 30,90" fill="none" stroke="#ef4444" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M35,35 L15,10" fill="none" stroke="#ef4444" stroke-width="4"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">木星丘へ伸びる</div>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>


                <!-- Group 4: Fate (Fate Line) New! -->
                <div class="bg-white p-6 rounded-3xl shadow-lg border border-stone-100 hover:shadow-xl transition-all">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-12 h-12 bg-purple-50 rounded-full flex items-center justify-center">
                            <i data-lucide="trending-up" class="w-8 h-8 text-purple-600"></i>
                        </div>
                        <h4 class="text-lg font-bold text-stone-800">4. 運命線</h4>
                    </div>

                    <div class="space-y-3">
                        <button onclick="diagnose('fate', 'straight')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-purple-300 group-hover:bg-purple-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M50,90 L50,20" fill="none" stroke="#8b5cf6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">中央を一直線</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('fate', 'popular')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-purple-300 group-hover:bg-purple-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M80,85 Q65,60 55,20" fill="none" stroke="#8b5cf6" stroke-width="6"
                                            stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">月丘から昇る</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('fate', 'head')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-purple-300 group-hover:bg-purple-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M50,45 L50,15" fill="none" stroke="#8b5cf6" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M20,45 Q50,45 80,45" fill="none" stroke="#e5e7eb" stroke-width="2" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">知能線から昇る</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('fate', 'life_rising')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-purple-300 group-hover:bg-purple-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M35,60 Q40,40 50,15" fill="none" stroke="#8b5cf6" stroke-width="6"
                                            stroke-linecap="round" />
                                        <path d="M25,20 Q65,40 30,90" fill="none" stroke="#e5e7eb" stroke-width="2" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">生命線から昇る</div>
                                </div>
                            </div>
                        </button>
                        <button onclick="diagnose('fate', 'broken')" class="w-full group text-left">
                            <div
                                class="p-3 rounded-2xl bg-stone-50 border border-stone-200 group-hover:border-purple-300 group-hover:bg-purple-50 transition-all">
                                <div class="flex gap-3 items-center">
                                    <svg width="40" height="40" viewBox="0 0 100 100"
                                        class="flex-shrink-0 bg-white rounded-lg border border-stone-100">
                                        <path d="M50,90 Q55,75 45,60 T50,30 T50,10" fill="none" stroke="#8b5cf6"
                                            stroke-width="6" stroke-linecap="round" />
                                    </svg>
                                    <div class="text-[12px] font-bold text-stone-800">断続的・波打ち</div>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>

            </div>

            <!-- New Section: Mount Characteristics Expanded -->
            <div class="pt-12 border-t border-stone-100">
                <h4
                    class="text-xl font-bold text-stone-800 serif mb-2 flex items-center gap-2 text-center md:text-left justify-center md:justify-start">
                    <i data-lucide="mountain" class="w-6 h-6 text-amber-600"></i> 各丘の発達（ふくらみ）で見る
                </h4>
                <p class="text-stone-500 text-xs mb-8 text-center md:text-left leading-relaxed">
                    手の中で<span class="text-amber-600 font-bold underline">「最も肉付きが良く、ふっくらとしている場所」</span>を一つ選んでください。<br
                        class="hidden md:block">
                    そこが今、あなたの人生で最も強く働いているエネルギーの源（エネルギー・ポイント）です。
                </p>

                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                    <!-- Venus Mount -->
                    <button onclick="diagnose('mount', 'venus_high')" class="group text-left h-full">
                        <div
                            class="h-full bg-white p-4 rounded-2xl border border-stone-200 shadow-sm hover:ring-2 hover:ring-red-200 hover:bg-red-50/30 transition-all flex flex-col items-center text-center gap-3">
                            <div class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center">
                                <i data-lucide="heart" class="w-7 h-7 text-red-500"></i>
                            </div>
                            <div class="space-y-1">
                                <div class="text-[11px] font-extrabold text-stone-800">金星丘</div>
                                <div class="text-[9px] text-stone-400">生命力・愛情</div>
                            </div>
                        </div>
                    </button>
                    <!-- Jupiter Mount -->
                    <button onclick="diagnose('mount', 'jupiter_high')" class="group text-left h-full">
                        <div
                            class="h-full bg-white p-4 rounded-2xl border border-stone-200 shadow-sm hover:ring-2 hover:ring-amber-200 hover:bg-amber-50/30 transition-all flex flex-col items-center text-center gap-3">
                            <div class="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center">
                                <i data-lucide="crown" class="w-7 h-7 text-amber-500"></i>
                            </div>
                            <div class="space-y-1">
                                <div class="text-[11px] font-extrabold text-stone-800">木星丘</div>
                                <div class="text-[9px] text-stone-400">野心・自立</div>
                            </div>
                        </div>
                    </button>
                    <!-- Saturn Mount -->
                    <button onclick="diagnose('mount', 'saturn_high')" class="group text-left h-full">
                        <div
                            class="h-full bg-white p-4 rounded-2xl border border-stone-200 shadow-sm hover:ring-2 hover:ring-stone-400 hover:bg-stone-50 transition-all flex flex-col items-center text-center gap-3">
                            <div class="w-12 h-12 rounded-full bg-stone-100 flex items-center justify-center">
                                <i data-lucide="microscope" class="w-7 h-7 text-stone-600"></i>
                            </div>
                            <div class="space-y-1">
                                <div class="text-[11px] font-extrabold text-stone-800">土星丘</div>
                                <div class="text-[9px] text-stone-400">忍耐・探求</div>
                            </div>
                        </div>
                    </button>
                    <!-- Sun Mount -->
                    <button onclick="diagnose('mount', 'sun_high')" class="group text-left h-full">
                        <div
                            class="h-full bg-white p-4 rounded-2xl border border-stone-200 shadow-sm hover:ring-2 hover:ring-yellow-300 hover:bg-yellow-50/50 transition-all flex flex-col items-center text-center gap-3">
                            <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center">
                                <i data-lucide="sun" class="w-7 h-7 text-yellow-500"></i>
                            </div>
                            <div class="space-y-1">
                                <div class="text-[11px] font-extrabold text-stone-800">太陽丘</div>
                                <div class="text-[9px] text-stone-400">成功・人気</div>
                            </div>
                        </div>
                    </button>
                    <!-- Mercury Mount -->
                    <button onclick="diagnose('mount', 'mercury_high')" class="group text-left h-full">
                        <div
                            class="h-full bg-white p-4 rounded-2xl border border-stone-200 shadow-sm hover:ring-2 hover:ring-emerald-300 hover:bg-emerald-50/50 transition-all flex flex-col items-center text-center gap-3">
                            <div class="w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center">
                                <i data-lucide="banknote" class="w-7 h-7 text-emerald-600"></i>
                            </div>
                            <div class="space-y-1">
                                <div class="text-[11px] font-extrabold text-stone-800">水星丘</div>
                                <div class="text-[9px] text-stone-400">財運・商才</div>
                            </div>
                        </div>
                    </button>
                    <!-- Moon Mount -->
                    <button onclick="diagnose('mount', 'moon_high')" class="group text-left h-full">
                        <div
                            class="h-full bg-white p-4 rounded-2xl border border-stone-200 shadow-sm hover:ring-2 hover:ring-indigo-300 hover:bg-indigo-50/50 transition-all flex flex-col items-center text-center gap-3">
                            <div class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center">
                                <i data-lucide="wand-2" class="w-7 h-7 text-indigo-500"></i>
                            </div>
                            <div class="space-y-1">
                                <div class="text-[11px] font-extrabold text-stone-800">月丘</div>
                                <div class="text-[9px] text-stone-400">感性・神秘</div>
                            </div>
                        </div>
                    </button>
                </div>

            </div>

            <!-- Analysis Report Section (Real-time update) -->
            <div id="diagnostic-report"
                class="mt-20 p-8 md:p-12 bg-stone-50 rounded-[3rem] border border-stone-200 shadow-inner relative overflow-hidden">
                <div
                    class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-amber-200 via-amber-400 to-amber-200">
                </div>
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
                        <div class="text-center md:text-left">
                            <h4 class="text-2xl font-bold text-stone-900 serif">Your Analysis Report</h4>
                            <p class="text-stone-500 text-sm">鑑定書：あなたの手のひらが語る本質</p>
                        </div>
                        <button onclick="clearReport()"
                            class="flex items-center gap-2 px-4 py-2 text-xs font-bold text-stone-400 hover:text-red-500 transition-colors">
                            <i data-lucide="rotate-ccw" class="w-4 h-4"></i> リセット
                        </button>
                    </div>

                    <div id="report-empty" class="py-12 text-center">
                        <div
                            class="inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4 shadow-sm border border-stone-100">
                            <i data-lucide="file-edit" class="w-8 h-8 text-stone-200"></i>
                        </div>
                        <p class="text-stone-400 text-sm italic">上のアイコンから自身の線や丘の状態を選択してください。<br>ここにあなたの鑑定レポートが構成されます。
                        </p>
                    </div>

                    <div id="report-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 hidden">
                        <!-- Categories will be injected here -->
                    </div>

                    <div id="report-footer" class="mt-10 pt-8 border-t border-stone-200 hidden text-center">
                        <p class="text-[10px] text-stone-400 uppercase tracking-[0.2em] font-bold">Generated by Triscope
                            Palmistry Engine</p>
                    </div>
                </div>
            </div>


        </section>


        <!-- Section 3: Comparative Analysis -->
        <section id="analysis" class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <h3 class="text-3xl font-bold text-stone-800 serif">手相（相術）の特性と本質</h3>
                <p class="text-stone-600 leading-relaxed">
                    手相（相術）が他の占術と一線を画す点は、その「変化性」にあります。生まれた時の星配置で決まる「命術」とは異なり、手相はあなたの決断や習慣、健康状態によって線が書き換わっていきます。
                </p>

                <div class="grid grid-cols-1 gap-4">
                    <div
                        class="p-5 bg-white rounded-2xl shadow-sm border border-stone-100 hover:border-indigo-200 transition-colors">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center">
                                <i data-lucide="check" class="w-5 h-5 text-indigo-600"></i>
                            </div>
                            <h4 class="font-bold text-stone-800">手相で分かること（顕在化する才能）</h4>
                        </div>
                        <ul class="text-sm text-stone-600 space-y-2 ml-1">
                            <li class="flex gap-2"><span>・</span>本来の気質からくる行動原理や適職</li>
                            <li class="flex gap-2"><span>・</span>現在の精神的・肉体的な健康状態</li>
                            <li class="flex gap-2"><span>・</span>流年法を用いた人生の大きな転換点の時期</li>
                        </ul>
                    </div>
                    <div
                        class="p-5 bg-white rounded-2xl shadow-sm border border-stone-100 hover:border-amber-200 transition-colors">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center">
                                <i data-lucide="info" class="w-5 h-5 text-amber-600"></i>
                            </div>
                            <h4 class="font-bold text-stone-800">手相に不向きなこと（外的要因）</h4>
                        </div>
                        <ul class="text-sm text-stone-600 space-y-2 ml-1">
                            <li class="flex gap-2"><span>・</span>具体的な日付や数値（3月5日、100万円など）</li>
                            <li class="flex gap-2"><span>・</span>他人の感情や状況の変化（卜術の領域）</li>
                            <li class="flex gap-2"><span>・</span>個人の意識とは無関係に起こる外的ラッキー</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-white p-8 rounded-3xl shadow-xl border border-stone-100">
                <div class="text-center mb-6">
                    <h4 class="font-bold text-stone-800">占術特性の比較分析</h4>
                    <p class="text-xs text-stone-400 mt-1 uppercase tracking-widest">Logic Comparison</p>
                </div>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section: Special Signs (New Content) -->
        <section id="special-signs" class="space-y-12">
            <div class="text-center max-w-2xl mx-auto space-y-4">
                <h3 class="text-3xl font-bold text-stone-800 serif">手に現れる「幸運の印」特殊紋</h3>
                <p class="text-stone-600">
                    主要な線以外に現れる、幾何学的な紋様。これらは特定の運勢が急激に高まっているサインや、注意を促すメッセージです。
                </p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
                <!-- Star -->
                <div
                    class="bg-white p-5 rounded-2xl border border-stone-100 text-center space-y-3 hover:shadow-lg transition-all group">
                    <div
                        class="w-12 h-12 bg-amber-50 rounded-full flex items-center justify-center mx-auto group-hover:bg-amber-100 transition-colors">
                        <i data-lucide="star" class="w-6 h-6 text-amber-600"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-stone-800 text-sm">スター (星紋)</h5>
                        <p class="text-[10px] text-stone-500 mt-1">思いがけない大幸運、人気運の急上昇。</p>
                    </div>
                </div>
                <!-- Cross -->
                <div
                    class="bg-white p-5 rounded-2xl border border-stone-100 text-center space-y-3 hover:shadow-lg transition-all group">
                    <div
                        class="w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center mx-auto group-hover:bg-indigo-100 transition-colors">
                        <i data-lucide="plus" class="w-6 h-6 text-indigo-600"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-stone-800 text-sm">十字紋 (クロス)</h5>
                        <p class="text-[10px] text-stone-500 mt-1">神秘十字紋など、信仰心や直感、九死に一生を得る加護。</p>
                    </div>
                </div>
                <!-- Triangle -->
                <div
                    class="bg-white p-5 rounded-2xl border border-stone-100 text-center space-y-3 hover:shadow-lg transition-all group">
                    <div
                        class="w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center mx-auto group-hover:bg-emerald-100 transition-colors">
                        <i data-lucide="triangle" class="w-6 h-6 text-emerald-600"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-stone-800 text-sm">トライアングル</h5>
                        <p class="text-[10px] text-stone-500 mt-1">努力が実を結び、特定の才能が開花する証。</p>
                    </div>
                </div>
                <!-- Square -->
                <div
                    class="bg-white p-5 rounded-2xl border border-stone-100 text-center space-y-3 hover:shadow-lg transition-all group">
                    <div
                        class="w-12 h-12 bg-stone-100 rounded-full flex items-center justify-center mx-auto group-hover:bg-stone-200 transition-colors">
                        <i data-lucide="square" class="w-6 h-6 text-stone-600"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-stone-800 text-sm">スクエア (四角紋)</h5>
                        <p class="text-[10px] text-stone-500 mt-1">一発逆転、窮地を脱する保護のメッセージ。</p>
                    </div>
                </div>
                <!-- Fish -->
                <div
                    class="bg-white p-5 rounded-2xl border border-stone-100 text-center space-y-3 hover:shadow-lg transition-all group">
                    <div
                        class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mx-auto group-hover:bg-blue-100 transition-colors">
                        <i data-lucide="fish" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-stone-800 text-sm">フィッシュ (魚紋)</h5>
                        <p class="text-[10px] text-stone-500 mt-1">最も強力な吉兆。豊かな実りと希望の訪れ。</p>
                    </div>
                </div>
                <!-- Grille -->
                <div
                    class="bg-white p-5 rounded-2xl border border-stone-100 text-center space-y-3 hover:shadow-lg transition-all group">
                    <div
                        class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto group-hover:bg-red-100 transition-colors">
                        <i data-lucide="grid-3x3" class="w-6 h-6 text-red-600"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-stone-800 text-sm">グリル (格子紋)</h5>
                        <p class="text-[10px] text-stone-500 mt-1">その丘の意味が非常に強調されている状態。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: History & Logic -->
        <section id="history"
            class="bg-white rounded-[3rem] p-8 md:p-16 mb-20 border border-stone-100 shadow-sm relative overflow-hidden">
            <div class="absolute top-0 right-0 -mr-20 -mt-20 w-64 h-64 bg-amber-50 rounded-full blur-3xl opacity-50">
            </div>
            <div class="max-w-4xl mx-auto relative z-10">
                <h3 class="text-3xl font-bold text-stone-800 serif mb-10 text-center">歴史とロジックの系譜</h3>


                <div class="relative border-l-2 border-stone-100 ml-4 md:ml-0 space-y-12">
                    <!-- Timeline Item 1 -->
                    <div class="relative md:pl-8">
                        <span
                            class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-amber-500 ring-4 ring-white"></span>
                        <div class="pl-6 md:pl-0">
                            <span class="text-amber-600 font-bold text-xs tracking-widest uppercase">起源
                                (約3000-5000年前)</span>
                            <h4 class="text-xl font-bold text-stone-800 mt-1">古代インドでの発祥</h4>
                            <p class="mt-2 text-stone-600 text-sm leading-relaxed">
                                手相のルーツは古代インドにあります。アーユルヴェーダなどの医学的見地や、星々の動きと身体の関連性を説く思想と結びつき、「手は脳の鏡である」という概念が生まれました。
                            </p>
                        </div>
                    </div>


                    <!-- Timeline Item 2 -->
                    <div class="relative md:pl-8">
                        <span
                            class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-stone-200 ring-4 ring-white"></span>
                        <div class="pl-6 md:pl-0">
                            <span class="text-stone-400 font-bold text-xs tracking-widest uppercase">伝播と分岐</span>
                            <h4 class="text-xl font-bold text-stone-800 mt-1">東洋と西洋への分岐</h4>
                            <p class="mt-2 text-stone-600 text-sm leading-relaxed">
                                インドから中国へ伝わったものは「東洋手相術」として、漢方医学や易学と融合しました。一方、西へ伝わったものはギリシャ・ローマを経て「西洋手相術」となり、性格分析や心理学的側面を強めていきました。
                            </p>
                        </div>
                    </div>


                    <!-- Timeline Item 3 -->
                    <div class="relative md:pl-8">
                        <span
                            class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-indigo-200 ring-4 ring-white"></span>
                        <div class="pl-6 md:pl-0">
                            <span class="text-indigo-600 font-bold text-xs tracking-widest uppercase">近代日本</span>
                            <h4 class="text-xl font-bold text-stone-800 mt-1">西洋式手相の普及</h4>
                            <p class="mt-2 text-stone-600 text-sm leading-relaxed">
                                日本には平安時代に東洋式が伝わりましたが、現在主流となっているのは明治・大正期に入ってきた西洋式の手相術です。現代では両者の長所を取り入れた独自のスタイルが確立されています。
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mt-16 bg-stone-50 p-8 rounded-3xl border border-stone-100">
                    <h4 class="font-bold text-stone-800 mb-4 flex items-center gap-2">
                        <i data-lucide="brain" class="w-6 h-6 text-indigo-600"></i> 根拠となるロジック
                    </h4>
                    <p class="text-stone-600 text-sm leading-relaxed">
                        手は人体の外部器官の中で最も大脳と密接に神経がつながっています（ペンフィールドの脳地図）。脳の状態や意識の変化が神経を通じて手のひらの筋肉や血流に微細な影響を与え、長い時間をかけて「シワ（線）」や「肉付き（丘）」を形成するという説が有力です。
                    </p>
                </div>
            </div>
        </section>

        <!-- Section 5: Methodology -->
        <section id="method" class="max-w-5xl mx-auto mb-12">
            <h3 class="text-2xl font-bold text-stone-800 serif mb-8 text-center">基本的な鑑定ステップ</h3>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Step 1 -->
                <div
                    class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition-shadow border-t-4 border-amber-500">
                    <div class="text-amber-600 font-bold text-4xl mb-4 opacity-20">01</div>
                    <h4 class="font-bold text-lg mb-2">左右の手を確認</h4>
                    <p class="text-stone-600 text-sm">
                        一般的に、<strong>左手は「先天運（生まれ持った才能・過去）」</strong>、<strong>右手は「後天運（自分で切り開いた現在・未来）」</strong>を表すとされます。両手を見比べ、そのギャップから人生の変化を読み取ります。
                    </p>
                </div>

                <!-- Step 2 -->
                <div
                    class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition-shadow border-t-4 border-indigo-500">
                    <div class="text-indigo-600 font-bold text-4xl mb-4 opacity-20">02</div>
                    <h4 class="font-bold text-lg mb-2">4大基本線を見る</h4>
                    <p class="text-stone-600 text-sm">
                        生命線（健康・寿命）、知能線（才能・適職）、感情線（性格・恋愛）、運命線（人生の流れ）の4本を中心に観察します。線の濃さ、乱れ、枝分かれが重要なヒントになります。
                    </p>
                </div>

                <!-- Step 3 -->
                <div
                    class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition-shadow border-t-4 border-emerald-500">
                    <div class="text-emerald-600 font-bold text-4xl mb-4 opacity-20">03</div>
                    <h4 class="font-bold text-lg mb-2">流年法で時期を読む</h4>
                    <p class="text-stone-600 text-sm">
                        線の始点を0歳とし、どの位置に障害線や開運線があるかを測ることで、「何歳頃に転機が訪れるか」を予測します。これを流年法（りゅうねんほう）と呼びます。
                    </p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-white text-stone-600 py-16 border-t border-stone-100">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col items-center text-center max-w-2xl mx-auto mb-12">
                <div
                    class="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center font-bold serif text-white text-lg mb-6 shadow-lg shadow-amber-200">
                    手
                </div>
                <h3 class="text-2xl font-bold text-stone-900 serif mb-4">Palmistry Explorer</h3>
                <p class="text-sm leading-relaxed text-stone-500">
                    手のひらに刻まれた「脳の縮図」。古代の統計学と現代の自己分析を融合し、あなたの可能性を解き明かす光の羅針盤。
                </p>
            </div>

            <div
                class="pt-12 border-t border-stone-100 flex flex-col md:flex-row justify-between items-center gap-6 text-[10px] text-stone-400 uppercase tracking-widest font-bold">
                <span>© 2026 Triscope Project. All rights reserved.</span>
                <div class="flex gap-8">
                    <span class="hover:text-stone-600 transition-colors">Powered by Ancient Logic</span>
                    <span class="hover:text-stone-600 transition-colors">Built with AI Technology</span>
                </div>
            </div>
            <p class="mt-8 text-[10px] text-stone-300 text-center">
                ※手相は統計的な傾向を示すものであり、確定した未来を保証するものではありません。
            </p>
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // --- Data & State ---
        const handData = {
            lines: {
                life: {
                    name: "生命線 (Life Line)",
                    desc: "親指と人差し指の間から手首に向かって弧を描く線。",
                    meaning: "生命力、健康状態、寿命の傾向を表します。長さだけでなく、カーブの張り出し具合がスタミナの有無を示します。",
                    points: "張り出しが大きい＝エネルギッシュ。切れ切れ＝変化の多い人生。",
                    color: "#ef4444"
                },
                head: {
                    name: "知能線 (Head Line)",
                    desc: "生命線と同じ始点から、手のひらを横切る線。",
                    meaning: "思考パターン、適職、才能を表します。長さは思考の深さ、向きは興味の方向性（現実or理想）を示します。",
                    points: "横にまっすぐ＝理数系・実務。下にカーブ＝文系・芸術。",
                    color: "#3b82f6"
                },
                heart: {
                    name: "感情線 (Heart Line)",
                    desc: "小指の下から人差し指方向へ伸びる線。",
                    meaning: "感情表現、恋愛傾向、性格の明るさを表します。線の乱れは感受性の豊かさを示します。",
                    points: "先端が急上昇＝熱しやすく冷めやすい。長い＝愛情深い。",
                    color: "#ec4899"
                },
                fate: {
                    name: "運命線 (Fate Line)",
                    desc: "手首付近から中指に向かって縦に伸びる線。",
                    meaning: "社会的な活躍、人生の充実度、運勢の流れを表します。無い人もいますが、それは「組織に属さない生き方」や「サポート役」を意味する場合もあります。",
                    points: "太く濃い＝自立心が強い。途切れ＝転職や転機。",
                    color: "#8b5cf6"
                }
            },
            mounts: {
                jupiter: {
                    name: "木星丘 (Jupiter Mount)",
                    desc: "人差し指の付け根。",
                    meaning: "野心、向上心、リーダーシップを司る場所です。",
                    color: "#fbbf24"
                },
                saturn: {
                    name: "土星丘 (Saturn Mount)",
                    desc: "中指の付け根。",
                    meaning: "忍耐、孤独、研究心を司ります。",
                    color: "#a8a29e"
                },
                sun: {
                    name: "太陽丘 (Sun Mount)",
                    desc: "薬指の付け根。",
                    meaning: "人気、成功、金運、芸術性を表します。",
                    color: "#f59e0b"
                },
                mercury: {
                    name: "水星丘 (Mercury Mount)",
                    desc: "小指の付け根。",
                    meaning: "商才、コミュニケーション能力、財運を表します。",
                    color: "#34d399"
                },
                venus: {
                    name: "金星丘 (Venus Mount)",
                    desc: "親指の付け根の広い膨らみ。",
                    meaning: "生命力、愛情、家族愛、スタミナのタンクです。",
                    color: "#fca5a5"
                },
                moon: {
                    name: "月丘 (Moon Mount)",
                    desc: "小指側の下部。",
                    meaning: "想像力、神秘性、他人からの援助を表します。",
                    color: "#c4b5fd"
                }
            }
        };

        // --- Canvas Implementation ---
        const leftCanvas = document.getElementById('leftHandCanvas');
        const rightCanvas = document.getElementById('rightHandCanvas');
        const leftCtx = leftCanvas.getContext('2d');
        const rightCtx = rightCanvas.getContext('2d');
        const leftTooltip = document.getElementById('left-tooltip');
        const rightTooltip = document.getElementById('right-tooltip');

        let currentHover = null;

        function drawAllHands() {
            // Updated Mirroring Logic:
            // Base coords (thumb left) are used for Left side (Left Hand) -> isMirror=false
            // Mirrored coords (thumb right) are used for Right side (Right Hand) -> isMirror=true
            // This creates a "Mirror View" perspective.
            drawHand(leftCanvas, leftCtx, false);
            drawHand(rightCanvas, rightCtx, true);
        }

        function drawHand(canvas, ctx, isMirror) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const scale = canvas.width / 500;
            const mirrorX = (x) => isMirror ? (500 - x) * scale : x * scale;
            const fixX = (x) => x * scale;

            // 1. Draw Hand Outline
            ctx.beginPath();
            ctx.strokeStyle = '#e7e5e4';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            // Coordinates are based on a "Right Hand" (thumb left).
            // To draw Left Hand, we mirror X.

            // Wrist
            ctx.moveTo(mirrorX(100), fixX(580));
            ctx.lineTo(mirrorX(100), fixX(450));
            ctx.bezierCurveTo(mirrorX(90), fixX(400), mirrorX(40), fixX(350), mirrorX(60), fixX(280));
            ctx.bezierCurveTo(mirrorX(80), fixX(230), mirrorX(130), fixX(250), mirrorX(160), fixX(300));
            ctx.lineTo(mirrorX(160), fixX(150));
            ctx.bezierCurveTo(mirrorX(160), fixX(100), mirrorX(200), fixX(100), mirrorX(200), fixX(150));
            ctx.lineTo(mirrorX(200), fixX(300));
            ctx.lineTo(mirrorX(220), fixX(80));
            ctx.bezierCurveTo(mirrorX(220), fixX(30), mirrorX(270), fixX(30), mirrorX(270), fixX(80));
            ctx.lineTo(mirrorX(270), fixX(300));
            ctx.lineTo(mirrorX(300), fixX(100));
            ctx.bezierCurveTo(mirrorX(300), fixX(50), mirrorX(340), fixX(50), mirrorX(340), fixX(100));
            ctx.lineTo(mirrorX(340), fixX(310));
            ctx.lineTo(mirrorX(370), fixX(180));
            ctx.bezierCurveTo(mirrorX(370), fixX(140), mirrorX(410), fixX(140), mirrorX(410), fixX(180));
            ctx.lineTo(mirrorX(410), fixX(400));
            ctx.bezierCurveTo(mirrorX(420), fixX(500), mirrorX(400), fixX(550), mirrorX(400), fixX(580));

            ctx.fillStyle = '#fffaf0';
            ctx.fill();
            ctx.stroke();

            // 2. Draw Mounts
            function dMount(id, x, y, r, color) {
                const mx = mirrorX(x);
                const my = fixX(y);
                const mr = r * scale;
                ctx.beginPath();
                ctx.arc(mx, my, mr, 0, Math.PI * 2);
                ctx.fillStyle = color + (currentHover === id ? '80' : '30');
                if (currentHover === id) {
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                ctx.fill();
            }

            dMount('jupiter', 180, 330, 35, handData.mounts.jupiter.color);
            dMount('saturn', 245, 330, 35, handData.mounts.saturn.color);
            dMount('sun', 320, 335, 35, handData.mounts.sun.color);
            dMount('mercury', 390, 360, 30, handData.mounts.mercury.color);
            dMount('venus', 130, 450, 55, handData.mounts.venus.color);
            dMount('moon', 380, 480, 50, handData.mounts.moon.color);

            // 3. Draw Lines
            function dLine(id, color, drawFn) {
                ctx.beginPath();
                drawFn(ctx, mirrorX, fixX);
                ctx.lineWidth = currentHover === id ? 8 : 4;
                ctx.strokeStyle = currentHover === id ? color : '#cbd5e1';
                if (currentHover === id) {
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = color;
                }
                ctx.lineCap = 'round';
                ctx.stroke();
                ctx.shadowBlur = 0;
            }

            dLine('life', handData.lines.life.color, (c, mx, fy) => {
                c.moveTo(mx(170), fy(350));
                c.bezierCurveTo(mx(200), fy(400), mx(180), fy(500), mx(150), fy(550));
            });

            dLine('head', handData.lines.head.color, (c, mx, fy) => {
                c.moveTo(mx(170), fy(350));
                c.bezierCurveTo(mx(250), fy(380), mx(300), fy(400), mx(380), fy(420));
            });

            dLine('heart', handData.lines.heart.color, (c, mx, fy) => {
                c.moveTo(mx(410), fy(380));
                c.bezierCurveTo(mx(350), fy(380), mx(250), fy(350), mx(200), fy(330));
            });

            dLine('fate', handData.lines.fate.color, (c, mx, fy) => {
                c.moveTo(mx(250), fy(550));
                c.lineTo(mx(250), fy(350));
            });
        }

        function handleHover(e, canvas, isMirror) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = 500 / rect.width;
            const scaleY = 600 / rect.height;
            let x = (e.clientX - rect.left) * scaleX;
            let y = (e.clientY - rect.top) * scaleY;

            // Normalize X based on mirroring state
            if (isMirror) x = 500 - x;

            const prevHover = currentHover;
            currentHover = null;

            // Mounts hit detection
            const mounts = [
                { id: 'jupiter', x: 180, y: 330, r: 40 },
                { id: 'saturn', x: 245, y: 330, r: 40 },
                { id: 'sun', x: 320, y: 335, r: 40 },
                { id: 'mercury', x: 390, y: 360, r: 35 },
                { id: 'venus', x: 130, y: 450, r: 60 },
                { id: 'moon', x: 380, y: 480, r: 55 }
            ];

            for (let m of mounts) {
                const dist = Math.sqrt((x - m.x) ** 2 + (y - m.y) ** 2);
                if (dist < m.r) {
                    currentHover = m.id;
                    break;
                }
            }

            // Lines hit detection (Simplified zones)
            if (!currentHover) {
                if (x > 150 && x < 200 && y > 350 && y < 550) currentHover = 'life';
                else if (x > 200 && x < 380 && y > 380 && y < 450) currentHover = 'head';
                else if (x > 200 && x < 410 && y > 300 && y < 380) currentHover = 'heart';
                else if (x > 230 && x < 270 && y > 350 && y < 550) currentHover = 'fate';
            }

            if (currentHover !== prevHover) {
                drawAllHands();
                updateInfoPanel(currentHover);
            }

            const tt = !isMirror ? leftTooltip : rightTooltip;
            if (currentHover) {
                const data = handData.lines[currentHover] || handData.mounts[currentHover];
                tt.textContent = data.name;
                tt.style.left = (e.clientX - rect.left + 15) + 'px';
                tt.style.top = (e.clientY - rect.top + 15) + 'px';
                tt.style.opacity = 1;
                canvas.style.cursor = 'pointer';
            } else {
                tt.style.opacity = 0;
                canvas.style.cursor = 'default';
            }
        }

        leftCanvas.addEventListener('mousemove', (e) => handleHover(e, leftCanvas, false));
        rightCanvas.addEventListener('mousemove', (e) => handleHover(e, rightCanvas, true));
        leftCanvas.addEventListener('mouseleave', () => { leftTooltip.style.opacity = 0; });
        rightCanvas.addEventListener('mouseleave', () => { rightTooltip.style.opacity = 0; });

        function simulateHover(id) {
            currentHover = id;
            drawAllHands();
            updateInfoPanel(id);
        }

        function updateInfoPanel(id) {
            const titleEl = document.getElementById('info-title');
            const catEl = document.getElementById('info-category');
            const descEl = document.getElementById('info-desc');
            const detailsEl = document.getElementById('info-details');
            const placeholderEl = document.getElementById('info-placeholder');
            const meaningEl = document.getElementById('info-meaning');
            const checkEl = document.getElementById('info-check');
            const linePointsSection = document.getElementById('line-points-section');

            if (!id) return;

            const data = handData.lines[id] || handData.mounts[id];
            const isLine = !!handData.lines[id];

            placeholderEl.classList.add('hidden');
            detailsEl.classList.remove('hidden');

            titleEl.textContent = data.name;
            titleEl.className = `text-2xl md:text-3xl font-bold serif ${isLine ? 'text-indigo-900' : 'text-stone-800'}`;
            catEl.textContent = isLine ? 'Major Line' : 'Hill/Mount';
            catEl.className = `px-3 py-1 rounded text-[10px] font-bold tracking-widest uppercase ${isLine ? 'bg-indigo-100 text-indigo-700' : 'bg-amber-100 text-amber-700'}`;

            descEl.textContent = data.desc;
            meaningEl.textContent = data.meaning;

            if (isLine) {
                linePointsSection.classList.remove('hidden');
                checkEl.innerHTML = `
                    <li class="flex items-start gap-2 text-sm text-stone-600">
                        <i data-lucide="check-circle-2" class="w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0"></i>
                        <span>${data.points}</span>
                    </li>
                `;
            } else {
                linePointsSection.classList.add('hidden');
            }
            lucide.createIcons();
        }

        // --- Chart.js Radar ---
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: ['性格・気質', '長期運勢', '健康状態', '具体的な日時', '相手の気持ち', '短期的な吉凶'],
                datasets: [{
                    label: '手相 (Palmistry)',
                    data: [9, 8, 9, 2, 3, 5],
                    backgroundColor: 'rgba(245, 158, 11, 0.2)', // Amber
                    borderColor: 'rgba(245, 158, 11, 1)',
                    pointBackgroundColor: 'rgba(245, 158, 11, 1)',
                }, {
                    label: 'タロット (Tarot)',
                    data: [6, 4, 3, 5, 9, 9],
                    backgroundColor: 'rgba(99, 102, 241, 0.2)', // Indigo
                    borderColor: 'rgba(99, 102, 241, 1)',
                    pointBackgroundColor: 'rgba(99, 102, 241, 1)',
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#e5e7eb' },
                        grid: { color: '#e5e7eb' },
                        pointLabels: {
                            font: { size: 12, family: "'Noto Sans JP', sans-serif" },
                            color: '#4b5563'
                        },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                },
                plugins: {
                    legend: { position: 'bottom' }
                }
            }
        });

        // --- Comprehensive Diagnostics Logic ---
        const diagData = {
            head: {
                straight: { title: "【論理的実務家タイプ】", text: "物事を客観的、かつ論理的に捉える力に優れています。感情に流されず、事実に基づいて判断を下すため、ビジネスや実務的な分野で厚い信頼を得る、プロフェッショナルな素質を持っています。", icon: "file-text" },
                curved: { title: "【感性豊かなクリエイタータイプ】", text: "想像力や直感力に優れ、独創的なアイデアを生み出す才能があります。芸術やデザイン、企画など、感性を活かす分野で真価を発揮し、独自の視点で周囲を驚かせる可能性を秘めています。", icon: "palette" },
                short: { title: "【即断即決の直感型】", text: "考えるよりも先に体が動く、非常にフットワークの軽いタイプです。変化を恐れず、持ち前の直感力でチャンスを瞬時に掴み取ります。スピード感が求められる環境で最大のパフォーマンスを発揮します。", icon: "zap" },
                long: { title: "【熟考・理論派の職人気質】", text: "物事を深く掘り下げ、多角的に検討する粘り強い思考の持ち主です。決して妥協せず、完璧を追い求める姿勢は周囲から高く評価されます。専門性の高い技術職や、研究者として大成する相です。", icon: "microscope" },
                forked: { title: "【多才なアイデアマン】", text: "二つの異なる視点を持ち、柔軟な発想ができるタイプです。複数のことを同時にこなす器用さもあり、執筆や企画、コーディネートなど、情報を統合して新しい価値を生む仕事で活躍します。", icon: "layout" }
            },
            heart: {
                upward: { title: "【情熱的なロマンチスト】", text: "感情表現が豊かで、非常に情熱的な性格の持ち主です。何事にも心を込めて向き合い、人間味あふれる魅力で周囲を引き寄せます。一度火がつくと驚くほどの集中力と献身を見せるタイプです。", icon: "flame" },
                between: { title: "【誠実でバランスの取れた愛の人】", text: "愛情深く、かつ理性を失わない、非常に調和の取れた精神の持ち主です。誠実な対人関係を築くことができ、家族や友人に惜しみない愛を注ぎます。あなたの周りには常に穏やかな空気が流れています。", icon: "smile" },
                branch: { title: "【社交性抜群の気配り達人】", text: "相手の気持ちを察する能力に長け、誰とでも円滑にコミュニケーションが取れる社交家です。サービス精神が旺盛で、場を盛り上げたり、人のサポートをすることに喜びを感じる愛されキャラです。", icon: "users" },
                horizontal: { title: "【冷静沈着なリアリスト】", text: "感情に左右されず、常に冷静に対処できる不動の精神を持っています。クールに見られがちですが、内面には強い責任感を秘めており、危機的状況でも動じずに解決策を導き出す頼れる存在です。", icon: "anchor" },
                chained: { title: "【感性豊かなデリケートタイプ】", text: "並外れた感受性を持ち、人の痛みや芸術の美しさを自分自身のことのように深く感じ取れる人です。その繊細さを強みに変えることで、表現の世界や人の心に寄り添う仕事で大きな光を放ちます。", icon: "activity" }
            },
            life: {
                wide: { title: "【バイタリティ溢れるリーダー】", text: "生命力が非常に強く、常にエネルギーに満ちあふれています。困難を跳ね除けるパワーがあり、周囲を明るくリードしていくカリスマ性を備えています。アクティブな活動を通して運気がさらに向上します。", icon: "zap" },
                narrow: { title: "【思慮深いデリケート派】", text: "繊細な感性を持ち、体力の消耗を察知して賢く行動できるタイプです。無理をせず、自分のペースを守ることで持てる才能がじっくりと発揮されます。一人の時間を大切にすることで精神的な安定を得られます。", icon: "search" },
                chain: { title: "【感受性豊かなデリケートタイプ】", text: "環境の変化に敏感で、きめ細やかな配慮ができる人です。他人の変化にもいち早く気づくことができ、その優しさが周囲の支えとなります。無理は禁物ですが、組織の潤滑油として不可欠な存在です。", icon: "activity" },
                broken: { title: "【転機をチャンスに変える人】", text: "人生において大きな環境の変化や、価値観の転換を経験しやすい相です。しかしそれは、新しい自分に生まれ変わるステップでもあります。変化を前向きに捉えることで、道がさらに大きく開けます。", icon: "refresh-cw" },
                rising: { title: "【目標へ突き進む向上心】", text: "非常に強い向上心と、自らチャンスを掴みに行く積極的な精神を持っています。目標を定めると、それに向かって邁進する力強さがあります。努力した分だけ、目に見える形で報われる幸運な相です。", icon: "trending-up" }
            },
            fate: {
                straight: { title: "【意志を貫く独立不敵型】", text: "運命線が手首から一直線に昇っている人は、強い意志と自立心の持ち主です。他人の助けを借りず、自らの実力で運命を切り拓きます。リーダーや経営者として活躍する「天下取り」の相とも言われます。", icon: "award" },
                popular: { title: "【人気と援助を掴むラッキー型】", text: "運命線が月丘（小指側の手首上）から昇る人は、周囲の人々からの協力や人気によって道が開けるタイプです。愛嬌があり、引き立てを受けやすいため、芸能、接客、クリエイティブな仕事で大きな成功を収めます。", icon: "users-2" },
                head: { title: "【知性を武器にする大器晩成型】", text: "運命線が知能線からスタートしている人は、自身の知識や経験を武器に、人生の後半（30代後半〜）から本格的に開花するタイプです。地道な努力が大きな実を結び、専門分野での第一人者となる可能性を秘めています。", icon: "graduation-cap" },
                life_rising: { title: "【自力開運の努力家】", text: "生命線から運命線が昇っている人は、自身のたゆまぬ努力によって、確実に夢を実現させる実力派です。家系などの恩恵よりも、自分の力で人生を築き上げることに誇りと喜びを感じる、尊敬されるタイプです。", icon: "clover" },
                broken: { title: "【変化を味方にする変革者】", text: "人生の途中で何度もキャリアチェンジや大きな方針転換を経験する傾向がありますが、そのたびに磨かれていく人です。一つの枠に収まらず、時代に合わせて自分をアップデートできる柔軟性が成功の鍵となります。", icon: "cpu" }
            },
            mount: {
                venus_high: { title: "【生命力溢れるエネルギッシュな人】", text: "金星丘が豊かに発達している人は、心身ともに非常にタフで、愛情深い性格です。スタミナがあり、困難を乗り越えるバイタリティに満ちています。家族や友人への献身も惜しみません。", icon: "heart" },
                venus_flat: { title: "【繊細で理知的なタイプ】", text: "金星丘が平坦な人は、肉体的なパワーよりも知性や精神性を重視する繊細な感性の持ち主です。無理をせず、自分のペースを守ることで才能が発揮されます。一人の時間を大切にする傾向があります。", icon: "coffee" },
                jupiter_high: { title: "【野心溢れるリーダータイプ】", text: "木星丘が膨らんでいる人は、向上心が強く、リーダーシップを発揮することに喜びを感じます。目標達成への意欲が高く、組織を牽引する力を持っています。自信を持って行動することで運気がさらに向上します。", icon: "crown" },
                jupiter_flat: { title: "【控えめで堅実なサポーター】", text: "木星丘が平坦な人は、自己主張よりも調和や実務を大切にする堅実派です。目立つことよりも、背後で着実に仕事を成し遂げることで周囲の信頼を得ます。調整役として欠かせない存在となります。", icon: "clipboard-check" },
                saturn_high: { title: "【孤独を愛する探求者】", text: "土星丘が豊かに発達している人は、強い忍耐力と深い思考力を持っています。一人の時間を大切にし、物事を徹底的に突き詰める研究者気質です。専門分野で大きな成果を上げます。", icon: "microscope" },
                saturn_flat: { title: "【行動力のある社交家】", text: "土星丘が平坦な人は、一か所にとどまるよりも、周囲と関わりながら活発に動くことを好みます。社交性が高く、フットワークの軽さを活かしてチャンスを掴むタイプです。", icon: "shuttle-cock" },
                sun_high: { title: "【人を惹きつける選ばれし人】", text: "太陽丘が豊かな人は、天性の魅力（スター性）と芸術的センスに恵まれています。金運も強く、成功を掴み取りやすい幸運の持ち主です。周囲を明るく照らす存在となります。", icon: "sun" },
                sun_flat: { title: "【堅実で落ち着いた平和主義】", text: "太陽丘が平坦な人は、派手な成功よりも着実で安定した生活を好みます。周囲との調和を乱さず、誠実に物事を進めることで、静かな信頼と幸福を築き上げていきます。", icon: "coffee" },
                mercury_high: { title: "【商才溢れるコミュニケーション達人】", text: "水星丘が豊かな人は、頭の回転が速く、交渉事やビジネスの才能に長けています。言葉の選び方が巧みで、情報や財を循環させる力を持っています。財運も非常に強い相です。", icon: "banknote" },
                mercury_flat: { title: "【誠実で飾り気のない直球型】", text: "水星丘が平坦な人は、駆け引きを好まず、常に誠実でまっすぐなコミュニケーションを大切にします。派手な商談より、信頼関係に基づく地道な仕事で評価を得ます。", icon: "check-circle" },
                moon_high: { title: "【豊かな想像力を持つ夢想家】", text: "月丘がふっくらしている人は、非常に豊かな感性と想像力の持ち主です。芸術、デザイン、企画など、ゼロから何かを生み出す分野で才能を開花させます。直感力も鋭く、人の心に響く表現が得意です。", icon: "wand-2" },
                moon_flat: { title: "【現実的で論理的な実務家】", text: "月丘が平坦な人は、空想よりも現実的な事実や数値を重視するリアリストです。地に足の着いた実務能力が高く、事務や技術職など、正確さが求められる分野で安定した実力を発揮します。", icon: "layout" }
            }
        };




        // --- Global Selection State ---
        let userSelections = {};

        function diagnose(category, type) {
            const resultBox = document.getElementById('self-diagnose-result');
            const titleEl = document.getElementById('diagnose-title');
            const textEl = document.getElementById('diagnose-text');
            const iconContainer = document.getElementById('diagnose-icon-container');

            const data = diagData[category][type];

            // Store selection
            userSelections[category] = {
                type: type,
                ...data
            };

            // Update main view with animation
            resultBox.classList.add('opacity-50');
            setTimeout(() => {
                titleEl.textContent = data.title;
                textEl.textContent = data.text;
                iconContainer.innerHTML = `<i data-lucide="${data.icon}" class="w-8 h-8 md:w-10 md:h-10 text-amber-600"></i>`;

                resultBox.className = resultBox.className.replace(/border-(blue|pink|red|purple|amber)-200/g, '');
                const activeColor = category === 'head' ? 'blue' : (category === 'heart' ? 'pink' : (category === 'life' ? 'red' : (category === 'fate' ? 'purple' : 'amber')));
                resultBox.classList.add(`border-${activeColor}-200`);
                resultBox.classList.remove('opacity-50');

                updateReportUI();
                lucide.createIcons();
            }, 100);

            // Highlight buttons
            document.querySelectorAll(`[onclick^="diagnose('${category}'"]`).forEach(btn => {
                const inner = btn.querySelector('div') || btn; // button itself for mounts
                if (inner.tagName === 'DIV') {
                    inner.classList.remove('ring-4', 'ring-blue-400', 'ring-pink-400', 'ring-red-400', 'ring-purple-400', 'ring-amber-400', 'bg-blue-50', 'bg-pink-50', 'bg-red-50', 'bg-purple-50', 'bg-amber-50');
                } else {
                    btn.classList.remove('ring-2', 'ring-blue-400', 'ring-pink-400', 'ring-red-400', 'ring-purple-400', 'ring-amber-400', 'bg-amber-100');
                }
            });

            const colorClass = category === 'head' ? 'blue' : (category === 'heart' ? 'pink' : (category === 'life' ? 'red' : (category === 'fate' ? 'purple' : 'amber')));
            const target = event.currentTarget.querySelector('div') || event.currentTarget;
            if (target.tagName === 'DIV') {
                target.classList.add('ring-4', `ring-${colorClass}-400`, `bg-${colorClass}-50`);
            } else {
                target.classList.add('ring-2', `ring-${colorClass}-400`, `bg-${colorClass}-100`);
            }
        }

        function updateReportUI() {
            const grid = document.getElementById('report-grid');
            const empty = document.getElementById('report-empty');
            const footer = document.getElementById('report-footer');

            const keys = Object.keys(userSelections);
            if (keys.length === 0) {
                grid.classList.add('hidden');
                empty.classList.remove('hidden');
                footer.classList.add('hidden');
                return;
            }

            empty.classList.add('hidden');
            grid.classList.remove('hidden');
            footer.classList.remove('hidden');
            grid.innerHTML = '';

            const categoryNames = {
                head: "知能線",
                heart: "感情線",
                life: "生命線",
                fate: "運命線",
                mount: "丘（エネルギー）"
            };

            keys.forEach(cat => {
                const item = userSelections[cat];
                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-2xl border border-stone-200 shadow-sm flex gap-4 animate-in fade-in slide-in-from-bottom-2 duration-500";
                card.innerHTML = `
                    <div class="w-10 h-10 rounded-xl bg-amber-50 border border-amber-100 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="${item.icon}" class="w-5 h-5 text-amber-600"></i>
                    </div>
                    <div>
                        <div class="text-[10px] font-bold text-amber-600 uppercase tracking-widest mb-1">${categoryNames[cat] || cat}</div>
                        <h5 class="text-sm font-bold text-stone-800 mb-1">${item.title}</h5>
                        <p class="text-xs text-stone-500 leading-relaxed">${item.text}</p>
                    </div>
                `;
                grid.appendChild(card);
            });
            lucide.createIcons();
        }

        function clearReport() {
            userSelections = {};
            updateReportUI();
            // Reset all highlights
            document.querySelectorAll('[onclick^="diagnose("]').forEach(btn => {
                const inner = btn.querySelector('div') || btn;
                inner.classList.remove('ring-4', 'ring-2', 'ring-blue-400', 'ring-pink-400', 'ring-red-400', 'ring-purple-400', 'ring-amber-400', 'bg-blue-50', 'bg-pink-50', 'bg-red-50', 'bg-purple-50', 'bg-amber-50', 'bg-amber-100');
            });
            const titleEl = document.getElementById('diagnose-title');
            const textEl = document.getElementById('diagnose-text');
            const iconContainer = document.getElementById('diagnose-icon-container');
            titleEl.textContent = "気になる線を選択してください";
            textEl.textContent = "下のパターンから、自分の手に最も近いものを選ぶと、ここに詳しい診断結果が表示されます。";
            iconContainer.innerHTML = `<i data-lucide="fingerprint" class="w-8 h-8 md:w-10 md:h-10 text-amber-500"></i>`;
            lucide.createIcons();
        }


        // Initialize
        drawAllHands();
        updateReportUI(); // Added this line
        lucide.createIcons();

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            const isHidden = menu.classList.toggle('hidden');
            btn.innerHTML = isHidden ? '<i data-lucide="menu" class="w-6 h-6"></i>' : '<i data-lucide="x" class="w-6 h-6"></i>';
            lucide.createIcons();
        }
        document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);

        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) {
                const headerOffset = 64;
                const elementPosition = el.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        }
    </script>
</body>

</html>